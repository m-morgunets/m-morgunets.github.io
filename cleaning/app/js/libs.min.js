!function(a,r,l,p){function d(t,e){var i=this;"object"==typeof e&&(delete e.refresh,delete e.render,a.extend(this,e)),this.$element=a(t),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var o=(this.position+"").toLowerCase().match(/\S+/g)||[];if(o.length<1&&o.push("center"),1==o.length&&o.push(o[0]),"top"!=o[0]&&"bottom"!=o[0]&&"left"!=o[1]&&"right"!=o[1]||(o=[o[1],o[0]]),this.positionX!==p&&(o[0]=this.positionX.toLowerCase()),this.positionY!==p&&(o[1]=this.positionY.toLowerCase()),i.positionX=o[0],i.positionY=o[1],"left"!=this.positionX&&"right"!=this.positionX&&(isNaN(parseInt(this.positionX))?this.positionX="center":this.positionX=parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(isNaN(parseInt(this.positionY))?this.positionY="center":this.positionY=parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;this.$mirror=a("<div />").prependTo(this.mirrorContainer);var n=this.$element.find(">.parallax-slider"),s=!1;0==n.length?this.$slider=a("<img />").prependTo(this.$mirror):(this.$slider=n.prependTo(this.$mirror),s=!0),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){i.naturalHeight&&i.naturalWidth||(i.naturalHeight=this.naturalHeight||this.height||1,i.naturalWidth=this.naturalWidth||this.width||1),i.aspectRatio=i.naturalWidth/i.naturalHeight,d.isSetup||d.setup(),d.sliders.push(i),d.isFresh=!1,d.requestRender()}),s||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||0<n.length)&&this.$slider.trigger("load")}!function(){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!r.requestAnimationFrame;++e)r.requestAnimationFrame=r[t[e]+"RequestAnimationFrame"],r.cancelAnimationFrame=r[t[e]+"CancelAnimationFrame"]||r[t[e]+"CancelRequestAnimationFrame"];r.requestAnimationFrame||(r.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-n)),o=r.setTimeout(function(){t(e+i)},i);return n=e+i,o}),r.cancelAnimationFrame||(r.cancelAnimationFrame=function(t){clearTimeout(t)})}(),a.extend(d.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",overScrollFix:!1,mirrorContainer:"body",refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t,e=d.winHeight,i=d.docHeight,o=Math.min(this.boxOffsetTop,i-e),n=Math.max(this.boxOffsetTop+this.boxHeight-e,0),s=this.boxHeight+(o-n)*(1-this.speed)|0,a=(this.boxOffsetTop-o)*(1-this.speed)|0;s*this.aspectRatio>=this.boxWidth?(this.imageWidth=s*this.aspectRatio|0,this.imageHeight=s,this.offsetBaseTop=a,t=this.imageWidth-this.boxWidth,"left"==this.positionX?this.offsetLeft=0:"right"==this.positionX?this.offsetLeft=-t:isNaN(this.positionX)?this.offsetLeft=-t/2|0:this.offsetLeft=Math.max(this.positionX,-t)):(this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0,t=this.imageHeight-s,"top"==this.positionY?this.offsetBaseTop=a:"bottom"==this.positionY?this.offsetBaseTop=a-t:isNaN(this.positionY)?this.offsetBaseTop=a-t/2|0:this.offsetBaseTop=a+Math.max(this.positionY,-t))},render:function(){var t=d.scrollTop,e=d.scrollLeft,i=this.overScrollFix?d.overScroll:0,o=t+d.winHeight;this.boxOffsetBottom>t&&this.boxOffsetTop<=o?(this.visibility="visible",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-e,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility="hidden",this.$mirror.css({transform:"translate3d("+this.mirrorLeft+"px, "+(this.mirrorTop-i)+"px, 0px)",visibility:this.visibility,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d("+this.offsetLeft+"px, "+this.offsetTop+"px, 0px)",position:"absolute",height:this.imageHeight,width:this.imageWidth,maxWidth:"none"})}}),a.extend(d,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){function t(){d.winHeight=n.height(),d.winWidth=n.width(),d.docHeight=o.height(),d.docWidth=o.width()}function e(){var t=n.scrollTop(),e=d.docHeight-d.winHeight,i=d.docWidth-d.winWidth;d.scrollTop=Math.max(0,Math.min(e,t)),d.scrollLeft=Math.max(0,Math.min(i,n.scrollLeft())),d.overScroll=Math.max(t-e,Math.min(t,0))}var i=this,o=a(l),n=a(r);n.on("resize.px.parallax load.px.parallax",function(){t(),i.refresh(),d.isFresh=!1,d.requestRender()}).on("scroll.px.parallax load.px.parallax",function(){e(),d.requestRender()}),t(),e(),this.isReady=!0;var s=-1;!function t(){if(s==r.pageYOffset)return r.requestAnimationFrame(t),!1;s=r.pageYOffset,i.render(),r.requestAnimationFrame(t)}()}},configure:function(t){"object"==typeof t&&(delete t.refresh,delete t.render,a.extend(this.prototype,t))},refresh:function(){a.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),a.each(this.sliders,function(){this.render()})},requestRender:function(){this.render(),this.isBusy=!1},destroy:function(t){var e,i=a(t).data("px.parallax");for(i.$mirror.remove(),e=0;e<this.sliders.length;e+=1)this.sliders[e]==i&&this.sliders.splice(e,1);a(t).data("px.parallax",!1),0===this.sliders.length&&(a(r).off("scroll.px.parallax resize.px.parallax load.px.parallax"),this.isReady=!1,d.isSetup=!1)}});var t=a.fn.parallax;a.fn.parallax=function(i){return this.each(function(){var t=a(this),e="object"==typeof i&&i;this==r||this==l||t.is("body")?d.configure(e):t.data("px.parallax")?"object"==typeof i&&a.extend(t.data("px.parallax"),e):(e=a.extend({},t.data(),e),t.data("px.parallax",new d(this,e))),"string"==typeof i&&("destroy"==i?d.destroy(this):d[i]())})},a.fn.parallax.Constructor=d,a.fn.parallax.noConflict=function(){return a.fn.parallax=t,this},a(function(){a('[data-parallax="scroll"]').parallax()})}(jQuery,window,document),function(h){var u,f,n,m=h(window),s={},g=[],b=[],v=null,p="_open",x=[],y=null,d=/(iPad|iPhone|iPod)/.test(navigator.userAgent),k={_init:function(t){var e=h(t),i=e.data("popupoptions");b[t.id]=!1,g[t.id]=0,e.data("popup-initialized")||(e.attr("data-popup-initialized","true"),k._initonce(t)),i.autoopen&&setTimeout(function(){k.show(t,0)},0)},_initonce:function(i){var t,e,o,n=h(i),s=h("body"),a=n.data("popupoptions");v=parseInt(s.css("margin-right"),10),y=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.transition,!a.scrolllock||void 0===u&&(o=(e=h('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),u=o.innerWidth()-o.height(99).innerWidth(),e.remove());if(n.attr("id")||n.attr("id","j-popup-"+parseInt(1e8*Math.random(),10)),n.addClass("popup_content"),a.background&&!h("#"+i.id+"_background").length){s.append('<div id="'+i.id+'_background" class="popup_background"></div>');var r=h("#"+i.id+"_background");r.css({opacity:0,visibility:"hidden",backgroundColor:a.color,position:"fixed",top:0,right:0,bottom:0,left:0}),a.setzindex&&!a.autozindex&&r.css("z-index","100000"),a.transition&&r.css("transition",a.transition)}s.append(i),n.wrap('<div id="'+i.id+'_wrapper" class="popup_wrapper" />'),(t=h("#"+i.id+"_wrapper")).css({opacity:0,visibility:"hidden",position:"absolute"}),d&&((r=h("#"+i.id+"_background")).css("cursor","pointer"),h(a.pagecontainer).css("cursor","pointer")),"overlay"==a.type&&!a.absolute&&a.background&&(t.css("overflow","auto"),t[0].style.WebkitOverflowScrolling="touch"),n.css({opacity:0,visibility:"hidden","pointer-events":"auto",display:"inline-block"}),a.setzindex&&!a.autozindex&&t.css("z-index","100001"),a.outline||n.css("outline","none"),a.transition&&(n.css("transition",a.transition),t.css("transition",a.transition)),n.attr("aria-hidden",!0),"overlay"==a.type&&(n.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),t.css({position:"fixed",width:"100%",height:"100%",top:0,left:0,textAlign:"center"}),t.append('<div class="popup_align" />'),h(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),n.attr("role","dialog");var l=a.openelement?a.openelement:"."+i.id+p;h(l).each(function(t,e){h(e).attr("data-popup-ordinal",t),e.id||h(e).attr("id","open_"+parseInt(1e8*Math.random(),10))}),n.attr("aria-labelledby")||n.attr("aria-label")||n.attr("aria-labelledby",h(l).attr("id")),"hover"==a.action?(a.keepfocus=!1,h(l).on("mouseenter",function(){k.show(i,h(this).data("popup-ordinal"))}),h(l).on("mouseleave",function(){k.hide(i)})):h(document).on("click.jqp",l,function(t){t.preventDefault();var e=h(this).data("popup-ordinal");setTimeout(function(){k.show(i,e)},0)}),a.closebutton&&k.addclosebutton(i),a.detach?n.detach():n.hide()},show:function(t,e){var i=h(t);if(!i.data("popup-visible")){i.data("popup-initialized")||k._init(t),i.attr("data-popup-initialized","true");var o=h("body"),n=i.data("popupoptions"),s=h("#"+t.id+"_wrapper"),a=h("#"+t.id+"_background");if(w(t,e,n.beforeopen),b[t.id]=e,setTimeout(function(){x.push(t.id)},0),n.autozindex){for(var r=document.getElementsByTagName("*"),l=r.length,p=0,d=0;d<l;d++){var c=h(r[d]).css("z-index");"auto"!==c&&p<(c=parseInt(c,10))&&(p=c)}g[t.id]=p,n.background&&0<=g[t.id]&&h("#"+t.id+"_background").css({zIndex:g[t.id]+1}),0<=g[t.id]&&s.css({zIndex:g[t.id]+2})}n.detach&&s.prepend(t),i.show(),f=setTimeout(function(){s.css({visibility:"visible",opacity:1}),h("html").addClass("popup_visible").addClass("popup_visible_"+t.id),s.addClass("popup_wrapper_visible")},20),n.scrolllock&&(o.css("overflow","hidden"),o.height()>m.height()&&o.css("margin-right",v+u)),i.css({visibility:"visible",opacity:1}),n.background&&(a.css({visibility:"visible",opacity:n.opacity}),setTimeout(function(){a.css({opacity:n.opacity})},0)),i.data("popup-visible",!0),k.reposition(t,e),i.data("focusedelementbeforepopup",document.activeElement),i.attr("tabindex",-1),setTimeout(function(){"closebutton"===n.focuselement?h("#"+t.id+" ."+t.id+"_close:first").focus():n.focuselement?h(n.focuselement).focus():!0!==n.focuselement&&!n.keepfocus||i.focus()},n.focusdelay),n.keepfocus&&h(n.pagecontainer).attr("aria-hidden",!0),i.attr("aria-hidden",!1),w(t,e,n.onopen),y?s.one("transitionend",function(){w(t,e,n.opentransitionend)}):w(t,e,n.opentransitionend),"tooltip"==n.type&&h(window).on("resize."+t.id,function(){k.reposition(t,e)})}},hide:function(t,e){var i=h.inArray(t.id,x);if(-1!==i){f&&clearTimeout(f);var o=h("body"),n=h(t),s=n.data("popupoptions"),a=h("#"+t.id+"_wrapper"),r=h("#"+t.id+"_background");n.data("popup-visible",!1),1===x.length?h("html").removeClass("popup_visible").removeClass("popup_visible_"+t.id):h("html").hasClass("popup_visible_"+t.id)&&h("html").removeClass("popup_visible_"+t.id),x.splice(i,1),a.hasClass("popup_wrapper_visible")&&a.removeClass("popup_wrapper_visible"),s.keepfocus&&!e&&setTimeout(function(){h(n.data("focusedelementbeforepopup")).is(":visible")&&n.data("focusedelementbeforepopup").focus()},0),a.css({visibility:"hidden",opacity:0}),n.css({visibility:"hidden",opacity:0}),s.background&&r.css({visibility:"hidden",opacity:0}),h(s.pagecontainer).attr("aria-hidden",!1),n.attr("aria-hidden",!0),w(t,b[t.id],s.onclose),y&&"0s"!==n.css("transition-duration")?n.one("transitionend",function(){n.data("popup-visible")||(s.detach?n.detach():n.hide()),s.scrolllock&&setTimeout(function(){h.grep(x,function(t){return h("#"+t).data("popupoptions").scrolllock}).length||o.css({overflow:"visible","margin-right":v})},10),w(t,b[t.id],s.closetransitionend)}):(s.detach?n.detach():n.hide(),s.scrolllock&&setTimeout(function(){h.grep(x,function(t){return h("#"+t).data("popupoptions").scrolllock}).length||o.css({overflow:"visible","margin-right":v})},10),w(t,b[t.id],s.closetransitionend)),"tooltip"==s.type&&h(window).off("resize."+t.id)}},toggle:function(t,e){h(t).data("popup-visible")?k.hide(t):setTimeout(function(){k.show(t,e)},0)},reposition:function(t,e){var i=h(t),o=i.data("popupoptions"),n=h("#"+t.id+"_wrapper");if(e=e||0,"tooltip"==o.type){var s;n.css({position:"absolute"});var a=(s=o.tooltipanchor?h(o.tooltipanchor):o.openelement?h(o.openelement).filter('[data-popup-ordinal="'+e+'"]'):h("."+t.id+p+'[data-popup-ordinal="'+e+'"]')).offset()||{left:0,top:0};"right"==o.horizontal?n.css("left",a.left+s.outerWidth()+o.offsetleft):"leftedge"==o.horizontal?n.css("left",a.left+o.offsetleft):"left"==o.horizontal?n.css("right",m.width()-a.left-o.offsetleft):"rightedge"==o.horizontal?n.css("right",m.width()-a.left-s.outerWidth()-o.offsetleft):n.css("left",a.left+s.outerWidth()/2-i.outerWidth()/2-parseFloat(i.css("marginLeft"))+o.offsetleft),"bottom"==o.vertical?n.css("top",a.top+s.outerHeight()+o.offsettop):"bottomedge"==o.vertical?n.css("top",a.top+s.outerHeight()-i.outerHeight()+o.offsettop):"top"==o.vertical?n.css("bottom",m.height()-a.top-o.offsettop):"topedge"==o.vertical?n.css("bottom",m.height()-a.top-i.outerHeight()-o.offsettop):n.css("top",a.top+s.outerHeight()/2-i.outerHeight()/2-parseFloat(i.css("marginTop"))+o.offsettop)}else"overlay"==o.type&&(o.horizontal?n.css("text-align",o.horizontal):n.css("text-align","center"),o.vertical?i.css("vertical-align",o.vertical):i.css("vertical-align","middle"),o.absolute&&n.css({position:"absolute",top:window.scrollY}),o.background||(n.css({"pointer-events":"none"}),o.absolute||r(t)||(i.css("overflow","auto"),i[0].style.WebkitOverflowScrolling="touch",i.css("max-height","calc(100% - "+i.css("margin-top")+" - "+i.css("margin-bottom")+")"))))},addclosebutton:function(t){var e;e=h(t).data("popupoptions").closebuttonmarkup?h(s.closebuttonmarkup).addClass(t.id+"_close"):'<button class="popup_close '+t.id+'_close" title="Close" aria-label="Close"><span aria-hidden="true">×</span></button>',h(t).data("popup-initialized")&&h(t).append(e)}},w=function(t,e,i){var o,n,s=h(t).data("popupoptions");void 0!==s&&(o=s.openelement?s.openelement:"."+t.id+p,n=h(o+'[data-popup-ordinal="'+e+'"]'),"function"==typeof i&&i.call(h(t),t,n))},r=function(t){var e=t.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)};h(document).on("keydown",function(t){if(x.length){var e=x[x.length-1],i=document.getElementById(e);h(i).data("popupoptions").escape&&27==t.keyCode&&k.hide(i)}}),h(document).on("mousedown",function(t){n=t.target}),h(document).on("click",function(t){if(x.length){var e=x[x.length-1],i=document.getElementById(e),o=h(i).data("popupoptions").closeelement?h(i).data("popupoptions").closeelement:"."+i.id+"_close";h(t.target).closest(o).length&&(t.preventDefault(),k.hide(i)),h(i).data("popupoptions")&&h(i).data("popupoptions").blur&&!h(t.target).closest(h(i).data("popupoptions").blurignore).length&&!h(t.target).closest("#"+e).length&&!h(n).closest("#"+e).length&&2!==t.which&&h(t.target).is(":visible")&&(h(i).data("popupoptions").background?(k.hide(i),t.preventDefault()):k.hide(i,!0))}}),h(document).on("keydown",function(t){if(x.length&&9==t.which){var e=x[x.length-1],i=document.getElementById(e);if(!h(i).data("popupoptions").keepfocus)return;var o=h(i).find("*").filter("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible"),n=h(":focus"),s=o.length,a=o.index(n);0===s?(h(i).focus(),t.preventDefault()):t.shiftKey?0===a&&(o.get(s-1).focus(),t.preventDefault()):a==s-1&&(o.get(0).focus(),t.preventDefault())}}),h.fn.popup=function(o){return this.each(function(){var t=h(this),e=h.extend(!0,{},h.fn.popup.defaults);if(o&&"tooltip"===o.type&&(e.background=!1),"object"==typeof o){var i=h.extend({},e,t.data("popupoptions"),o);t.data("popupoptions",i),s=t.data("popupoptions"),k._init(this)}else"string"==typeof o?(t.data("popupoptions")||(t.data("popupoptions",e),s=t.data("popupoptions")),k[o].call(this,this)):(t.data("popupoptions")||(t.data("popupoptions",e),s=t.data("popupoptions")),k._init(this))})},h.fn.popup.destroyall=function(){for(var t=0;t<x.length;t++)h("#"+x[t]).popup("hide");h(".popup_wrapper").remove(),h(".popup_background").remove(),h(document).off("click.jqp")},h.fn.popup.defaults={type:"overlay",absolute:!1,autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,blurignore:null,setzindex:!0,autozindex:!1,scrolllock:!1,closebutton:!1,closebuttonmarkup:null,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,tooltipanchor:null,beforeopen:null,onclose:null,onopen:null,opentransitionend:null,closetransitionend:null}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(_){var o,t=navigator.userAgent,z=/iphone/i.test(t),n=/chrome/i.test(t),W=/android/i.test(t);_.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},_.fn.extend({caret:function(t,e){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(e,b){var i,v,x,y,k,w,T;if(!e&&0<this.length){var t=_(this[0]).data(_.mask.dataName);return t?t():void 0}return b=_.extend({autoclear:_.mask.autoclear,placeholder:_.mask.placeholder,completed:null},b),i=_.mask.definitions,v=[],x=w=e.length,y=null,_.each(e.split(""),function(t,e){"?"==e?(w--,x=t):i[e]?(v.push(new RegExp(i[e])),null===y&&(y=v.length-1),t<x&&(k=v.length-1)):v.push(null)}),this.trigger("unmask").each(function(){function a(){if(b.completed){for(var t=y;t<=k;t++)if(v[t]&&f[t]===r(t))return;b.completed.call(u)}}function r(t){return b.placeholder.charAt(t<b.placeholder.length?t:0)}function l(t){for(;++t<w&&!v[t];);return t}function p(t,e){var i,o;if(!(t<0)){for(i=t,o=l(e);i<w;i++)if(v[i]){if(!(o<w&&v[i].test(f[o])))break;f[i]=f[o],f[o]=r(o),o=l(o)}c(),u.caret(Math.max(y,t))}}function s(){h(),u.val()!=g&&u.change()}function d(t,e){var i;for(i=t;i<e&&i<w;i++)v[i]&&(f[i]=r(i))}function c(){u.val(f.join(""))}function h(t){var e,i,o,n=u.val(),s=-1;for(o=e=0;e<w;e++)if(v[e]){for(f[e]=r(e);o++<n.length;)if(i=n.charAt(o-1),v[e].test(i)){f[e]=i,s=e;break}if(o>n.length){d(e+1,w);break}}else f[e]===n.charAt(o)&&o++,e<x&&(s=e);return t?c():s+1<x?b.autoclear||f.join("")===m?(u.val()&&u.val(""),d(0,w)):c():(c(),u.val(u.val().substring(0,s+1))),x?e:y}var u=_(this),f=_.map(e.split(""),function(t,e){return"?"!=t?i[t]?r(e):t:void 0}),m=f.join(""),g=u.val();u.data(_.mask.dataName,function(){return _.map(f,function(t,e){return v[e]&&t!=r(e)?t:null}).join("")}),u.one("unmask",function(){u.off(".mask").removeData(_.mask.dataName)}).on("focus.mask",function(){var t;u.prop("readonly")||(clearTimeout(o),g=u.val(),t=h(),o=setTimeout(function(){u.get(0)===document.activeElement&&(c(),t==e.replace("?","").length?u.caret(0,t):u.caret(t))},10))}).on("blur.mask",s).on("keydown.mask",function(t){if(!u.prop("readonly")){var e,i,o,n=t.which||t.keyCode;T=u.val(),8===n||46===n||z&&127===n?(i=(e=u.caret()).begin,(o=e.end)-i==0&&(i=46!==n?function(t){for(;0<=--t&&!v[t];);return t}(i):o=l(i-1),o=46===n?l(o):o),d(i,o),p(i,o-1),t.preventDefault()):13===n?s.call(this,t):27===n&&(u.val(g),u.caret(0,h()),t.preventDefault())}}).on("keypress.mask",function(t){if(!u.prop("readonly")){var e,i,o,n=t.which||t.keyCode,s=u.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||n<32)&&n&&13!==n){if(s.end-s.begin!=0&&(d(s.begin,s.end),p(s.begin,s.end-1)),(e=l(s.begin-1))<w&&(i=String.fromCharCode(n),v[e].test(i))){if(function(t){var e,i,o,n;for(i=r(e=t);e<w;e++)if(v[e]){if(o=l(e),n=f[e],f[e]=i,!(o<w&&v[o].test(n)))break;i=n}}(e),f[e]=i,c(),o=l(e),W){setTimeout(function(){_.proxy(_.fn.caret,u,o)()},0)}else u.caret(o);s.begin<=k&&a()}t.preventDefault()}}}).on("input.mask paste.mask",function(){u.prop("readonly")||setTimeout(function(){var t=h(!0);u.caret(t),a()},0)}),n&&W&&u.off("input.mask").on("input.mask",function(){var t=u.val(),e=u.caret();if(T&&T.length&&T.length>t.length){for(h(!0);0<e.begin&&!v[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<y&&!v[e.begin];)e.begin++;u.caret(e.begin,e.begin)}else{for(h(!0);e.begin<w&&!v[e.begin];)e.begin++;u.caret(e.begin,e.begin)}a()}),h()})}})});